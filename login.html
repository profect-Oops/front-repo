<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Top 10 Coins</title>
    <!-- FontAwesome ì•„ì´ì½˜ -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <!--Google Fonts-->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@200;300;400;600;700;800;900&display=swap" rel="stylesheet">

    <style>
        /* ë¡œê·¸ì¸ ì»¨í…Œì´ë„ˆ ì „ì²´ë¥¼ ê°ì‹¸ëŠ” ì˜ì—­ */
        .login-container {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh; /* ì „ì²´ í™”ë©´ ë†’ì´ */
        }

        /* ë¡œê·¸ì¸ ë°•ìŠ¤ (í°ìƒ‰ ë°°ê²½) */
        .login-box {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
            padding: 40px 50px;
            width: 350px;
            text-align: center;
            position: relative;
        }

        /* Login ì œëª© ìŠ¤íƒ€ì¼ */
        .login-title {
            color: #4e73df;
            font-weight: 800;
            font-size: 2rem;
            margin-bottom: 30px;
            text-align: center;
        }

        /* ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .social-login-buttons {
            display: flex;
            flex-direction: column; /* ë²„íŠ¼ì„ ì„¸ë¡œ ì •ë ¬ */
            align-items: center;
            gap: 15px; /* ë²„íŠ¼ ê°„ê²© */
            width: 100%;
        }

        .social-button {
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 12px 20px;
            font-size: 18px;
            border-radius: 30px;
            cursor: pointer;
            width: 100%;
            text-align: center;
            font-weight: bold;
            text-decoration: none;
        }

        .google-button {
            background-color: #4285F4;
            color: white;
        }

        .kakao-button {
            background-color: #F7E600;
            color: black;
        }

        .google-button:hover, .kakao-button:hover {
            opacity: 0.8;
        }

        .social-button i {
            margin-right: 10px;
        }

        /* ê¸°ë³¸ ìŠ¤íƒ€ì¼ */
        body {
            font-family: 'Nunito', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #EDEEF1;
        }

        /* ë„¤ë¹„ê²Œì´ì…˜ ë°” */
        .navbar {
            background-color: #4e73df;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 40px;
            padding: 15px 30px;
            color: white;
        }

        .navbar .brand {
            font-size: 1.0rem;
            font-weight: 800;  /* êµµê¸° ìµœëŒ€ê°’ */
            text-transform: uppercase;
            font-family: 'Nunito', sans-serif !important;
            text-align: left;
            white-space: nowrap; /* ì¤„ë°”ê¿ˆ ë°©ì§€ */
            margin-left: 10px;
        }


        .navbar .icons {
            display: flex;
            align-items: center;
            margin-left: auto;
            gap: 10px;
        }

        .navbar .icons i {
            font-size: 1.0rem;
            cursor: pointer;
            color: white;
            position: relative;
        }

        /* ì•ŒëŒ ë°°ì§€ ìŠ¤íƒ€ì¼ */
        .badge {
            position: absolute;
            top: -3px;
            right: -5px;
            background: red;
            color: white;
            font-size: 0.5rem;
            padding: 2px 4px;
            border-radius: 50%;
            font-weight: bold;
        }

        /* ì„¸ë¡œ êµ¬ë¶„ì„  */
        .divider {
            height: 25px;
            width: 2px;
            background-color: white;
            margin: 0 15px;
        }

        /* ìœ ì € í…ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .user-text {
            font-size: 0.8rem;
            color: #ffffff; /* í°ìƒ‰ ìœ ì§€ */
        }

        /* ë°˜ì‘í˜• ìŠ¤íƒ€ì¼ */
        @media (max-width: 480px) {
            .navbar .brand {
                text-align: left !important; /* ê°•ì œ ì™¼ìª½ ì •ë ¬ */
            }
        }
    </style>
</head>
<body>
<!-- ë„¤ë¹„ê²Œì´ì…˜ ë°” -->
<nav class="navbar">
    <div class="brand">
        <a href="/index.html" style="text-decoration: none; color: inherit;">Coinfo</a>
    </div>
    <div class="icons">
        <!-- ì•ŒëŒ ì•„ì´ì½˜ (ë°°ì§€ í¬í•¨) -->
        <div style="position: relative; cursor: pointer;" onclick="location.href='alert/alarm.html'">
            <i class="fas fa-bell"></i>
            <span class="badge">2+</span>
        </div>

        <!-- ì„¸ë¡œ êµ¬ë¶„ì„  -->
        <div class="divider"></div>

        <!-- ìœ ì € í”„ë¡œí•„ (í…ìŠ¤íŠ¸ í¬í•¨) -->
        <span class="user-text" id="user-email"></span>
        <!-- ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ì•„ì´ì½˜ -->
        <i id="auth-icon" class="fas" style="color: white; font-size: 30px; cursor: pointer;"></i>

    </div>
</nav>

<!-- ë¡œê·¸ì¸ -->
<div class="login-container">
    <div class="login-box">
        <h1 class="login-title">Login</h1>

        <!-- ì†Œì…œ ë¡œê·¸ì¸ ë²„íŠ¼ -->
        <div class="social-login-buttons">
            <!-- êµ¬ê¸€ ë¡œê·¸ì¸ ë²„íŠ¼ -->
            <a id="google-login-btn" class="social-button google-button" href="https://accounts.google.com/o/oauth2/auth?client_id=982183786748-tcro3aco6sn5tjlmigla2fpk6k39kjfi.apps.googleusercontent.com&redirect_uri=http://localhost:8080/login/oauth2/code/google&response_type=code&scope=profile+email">
                <i class="fab fa-google"></i> Google ë¡œê·¸ì¸
            </a>

            <!-- ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ë²„íŠ¼ -->
            <button class="social-button kakao-button">
                <i class="fas fa-comment"></i> Kakao ë¡œê·¸ì¸
            </button>
        </div>
    </div>
</div>
<script>
    const backendBaseUrl = "http://localhost:8080";  // EC2 í¼ë¸”ë¦­ IP ë˜ëŠ” ë„ë©”ì¸ ì…ë ¥
    
    //ë¡œê·¸ì¸ í™•ì¸
    async function checkUserLogin() {
        try {
            //ë¡œì»¬
            //const response = await fetch('/api/user/email'); // ë°±ì—”ë“œì—ì„œ ì´ë©”ì¼ ê°€ì ¸ì˜¤ê¸°
            const response = await fetch(`${backendBaseUrl}/api/user/email`);

            const email = await response.text(); // ì‘ë‹µì„ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜

            const userText = document.getElementById("user-email");
            const divider = document.querySelector(".divider");

            if (email.trim()) {
                // ë¡œê·¸ì¸ ìƒíƒœ â†’ ì´ë©”ì¼ í‘œì‹œ
                userText.textContent = email;
                if (divider) {
                    divider.style.display = "block"; // ë¡œê·¸ì¸ ìƒíƒœë©´ í‘œì‹œ
                }
            } else {
                // ë¡œê·¸ì•„ì›ƒ ìƒíƒœ â†’ ë¡œê·¸ì¸ ë²„íŠ¼ í™œì„±í™”
                userText.textContent = "";
                if (divider) {
                    divider.style.display = "none"; // ë¡œê·¸ì•„ì›ƒ ìƒíƒœë©´ ìˆ¨ê¹€
                }
            }
        } catch (error) {
            console.error("ğŸš¨ ë¡œê·¸ì¸ ì •ë³´ë¥¼ ê°€ì ¸ì˜¤ëŠ” ì¤‘ ì˜¤ë¥˜ ë°œìƒ:", error);
        }
    }

    checkUserLogin(); // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
</script>
</body>
</html>